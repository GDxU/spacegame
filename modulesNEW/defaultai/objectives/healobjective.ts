/// <reference path="../../../src/templateinterfaces/iobjectivetemplate.d.ts" />

import ObjectiveTemplate from "../../../src/templateinterfaces/ObjectiveTemplate.d.ts"; // TODO refactor | autogenerated

import Objective from "../../../src/mapai/Objective.ts"; // TODO refactor | autogenerated

import Fleet from "../../../src/Fleet.ts"; // TODO refactor | autogenerated

import Front from "../../../src/mapai/Front.ts"; // TODO refactor | autogenerated

import Star from "../../../src/Star.ts"; // TODO refactor | autogenerated

import Unit from "../../../src/Unit.ts"; // TODO refactor | autogenerated



export var heal: ObjectiveTemplate =
{
  key: "heal",
  movePriority: -1,
  preferredUnitComposition:
  {

  },
  moveRoutineFN: function(front: Front, afterMoveCallback: Function)
  {
    moveToRoutine(front, afterMoveCallback, function(fleet: Fleet)
    {
      return fleet.player.getNearestOwnedStarTo(fleet.location);
    });
  },
  unitDesireFN: function(front: Front){return 1;},
  unitFitFN: function(unit: Unit, front: Front)
  {
    var healthPercentage = unit.currentHealth / unit.maxHealth;
    return 1 - healthPercentage;
  },
  creatorFunction: function(grandStrategyAI: GrandStrategyAI,
    mapEvaluator: MapEvaluator)
  {
    var template = Modules.DefaultModule.Objectives.heal;
    return [new Objective(template, 1, null)];
  },
  unitsToFillObjectiveFN: function(mapEvaluator: MapEvaluator, objective: Objective)
  {
    return {min: 0, ideal: 0};
  }
}
